<!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <title>Car Value Estimation App</title>
            <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only],
.vscode-high-contrast:not(.vscode-high-contrast-light) img[src$=\#gh-light-mode-only],
.vscode-high-contrast-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
<style>
:root {
  --color-note: #0969da;
  --color-tip: #1a7f37;
  --color-warning: #9a6700;
  --color-severe: #bc4c00;
  --color-caution: #d1242f;
  --color-important: #8250df;
}

</style>
<style>
@media (prefers-color-scheme: dark) {
  :root {
    --color-note: #2f81f7;
    --color-tip: #3fb950;
    --color-warning: #d29922;
    --color-severe: #db6d28;
    --color-caution: #f85149;
    --color-important: #a371f7;
  }
}

</style>
<style>
.markdown-alert {
  padding: 0.5rem 1rem;
  margin-bottom: 16px;
  color: inherit;
  border-left: .25em solid #888;
}

.markdown-alert>:first-child {
  margin-top: 0
}

.markdown-alert>:last-child {
  margin-bottom: 0
}

.markdown-alert .markdown-alert-title {
  display: flex;
  font-weight: 500;
  align-items: center;
  line-height: 1
}

.markdown-alert .markdown-alert-title .octicon {
  margin-right: 0.5rem;
  display: inline-block;
  overflow: visible !important;
  vertical-align: text-bottom;
  fill: currentColor;
}

.markdown-alert.markdown-alert-note {
  border-left-color: var(--color-note);
}

.markdown-alert.markdown-alert-note .markdown-alert-title {
  color: var(--color-note);
}

.markdown-alert.markdown-alert-important {
  border-left-color: var(--color-important);
}

.markdown-alert.markdown-alert-important .markdown-alert-title {
  color: var(--color-important);
}

.markdown-alert.markdown-alert-warning {
  border-left-color: var(--color-warning);
}

.markdown-alert.markdown-alert-warning .markdown-alert-title {
  color: var(--color-warning);
}

.markdown-alert.markdown-alert-tip {
  border-left-color: var(--color-tip);
}

.markdown-alert.markdown-alert-tip .markdown-alert-title {
  color: var(--color-tip);
}

.markdown-alert.markdown-alert-caution {
  border-left-color: var(--color-caution);
}

.markdown-alert.markdown-alert-caution .markdown-alert-title {
  color: var(--color-caution);
}

</style>
        
        </head>
        <body class="vscode-body vscode-light">
            <h1 id="car-value-estimation-app">Car Value Estimation App</h1>
<p>Lightweight, fully local Python desktop application for estimating vehicle resale values based on make, model, year, mileage, and condition.</p>
<p>Built using Kivy for native-style UI development, ONNX Runtime for fast machine learning inference, and a custom-trained model on synthetic vehicle data.</p>
<hr>
<h2 id="overview">Overview</h2>
<p>This project delivers a cross-platform desktop application capable of estimating used vehicle resale values based on user inputs.</p>
<p>It demonstrates a full machine learning workflow from synthetic data generation and custom ML model training to lightweight cross-platform deployment via a native-style desktop app.</p>
<p>It also highlights how compact AI utilities can be developed and delivered locally, supporting early prototyping, user acceptance testing, or standalone ML-powered tools before bringing in heavy cloud infrastructure.</p>
<p>Beyond deployment, the project emphasizes realistic data simulation, efficient model packaging, and streamlined UX, key elements of accessible AI/ML systems.</p>
<hr>
<h2 id="features">Features</h2>
<ul>
<li>User inputs: Make, Model, Year, Mileage, Condition</li>
<li>Real-time car value prediction using an ONNX-optimized boosted tree regressor</li>
<li>Fully local inference — no internet connection required after installation</li>
<li>Dynamic dropdowns that update available models based on selected manufacturer</li>
<li>Generate and export valuation reports (<code>.txt</code> format)</li>
<li>Native macOS-style interface using Kivy framework</li>
<li>Custom application icon and lightweight desktop app packaging</li>
<li>End-to-end workflow: synthetic data generation → model training → ONNX export → cross-platform desktop deployment</li>
</ul>
<h2 id="application-interface">Application Interface</h2>
<p align="center">
  <img src="file:////Users/nucleus/KvCarValueApp/images/app_interface.png" alt="Application Interface" width="600"/>
</p>
<p align="center"><em>Figure: Screenshot of application interface with valuation estimation.</em></p>
<hr>
<h2 id="example-report-export">Example Report Export</h2>
<pre><code>Vehicle Valuation Report
Generated: 2024-07-10

The estimated value of a 2007 Toyota
with 101,000 miles in poor condition
is $7051.68.

This valuation is only an estimate and may vary significantly with time and usage.
</code></pre>
<hr>
<h2 id="model-development">Model Development</h2>
<p>The vehicle value prediction model was trained on a dataset of approximately 114,000 entries containing vehicle specifications and historical resale values.</p>
<h3 id="preprocessing">Preprocessing</h3>
<ul>
<li>Input features included: <strong>Make</strong>, <strong>Model</strong>, <strong>Year</strong>, <strong>Miles</strong>, and <strong>Condition</strong>.</li>
<li><strong>Condition</strong> was mapped from string labels to integers (e.g., Poor → 1, Like New → 6).</li>
<li><strong>Make</strong> and <strong>Model</strong> were integer-encoded rather than one-hot encoded, as experimental results showed only a marginal improvement (~0.5% in MAPE) with one-hot encoding.
<ul>
<li>This simplification maintained a clean feature space without significant performance degradation.</li>
<li>Model IDs were mapped into integer ranges (100–327), and cardinality did not present issues for model training.</li>
</ul>
</li>
</ul>
<h3 id="training">Training</h3>
<ul>
<li>The dataset was split into a <strong>training set</strong> (85%, ~96,900 samples) and a <strong>testing set</strong> (15%, ~17,100 samples).</li>
<li>The model was trained using <strong>XGBoost Regressor</strong> with hyperparameters:
<ul>
<li>Learning rate (<code>eta</code>): 0.12</li>
<li>Maximum tree depth: 13</li>
</ul>
</li>
</ul>
<h3 id="evaluation">Evaluation</h3>
<ul>
<li>Achieved approximately <strong>1.5% Mean Absolute Percentage Error (MAPE)</strong> on the test set.</li>
<li>Performance metrics:
<ul>
<li><strong>MAE</strong>, <strong>MSE</strong>, <strong>RMSE</strong>, and <strong>R²</strong> were computed and aligned with high prediction accuracy.</li>
<li>5-fold cross-validation confirmed stable model generalization.</li>
</ul>
</li>
<li>Feature importance (F-score) indicated:
<ul>
<li><strong>Miles</strong> and <strong>Model</strong> were the dominant predictors</li>
<li><strong>Year</strong>, <strong>Make</strong>, and <strong>Condition</strong> were secondary factors.</li>
</ul>
</li>
</ul>
<p align="center">
  <img src="file:////Users/nucleus/KvCarValueApp/images/feature_importance.png" alt="Feature Importance Plot" width="600"/>
</p>
<p align="center"><em>Figure: Feature importance according to XGBoost model F-score.</em></p>
<h3 id="deployment">Deployment</h3>
<ul>
<li>The final model was exported to <strong>ONNX format</strong> for integration into the lightweight desktop application.</li>
<li>Feature mappings were saved separately to ensure consistency between training and inference.</li>
</ul>
<p>The full model training process is available in <a href="notebooks/model_training_car_value_estimator.ipynb"><code>/notebooks/model_training_car_value_estimator.ipynb</code></a>.</p>
<hr>
<h2 id="data-generation">Data Generation</h2>
<p>The training dataset used to develop the car value prediction model was synthetically generated.</p>
<h3 id="key-points">Key points:</h3>
<ul>
<li>Vehicle <strong>makes</strong>, <strong>models</strong>, <strong>years</strong>, <strong>mileages</strong>, and <strong>conditions</strong> were sampled using realistic distributions based on expected vehicle lifespans, usage patterns, and market perceptions.</li>
<li>Base resale values were calculated using weighted multipliers for manufacturer brand, model popularity, model year, vehicle condition, and mileage impact.</li>
<li>Controlled random noise was injected during feature generation (e.g., mileage, condition selection) to simulate real-world data variability and avoid overly deterministic value mappings.</li>
<li>Separate data augmentations were performed to simulate:
<ul>
<li>Older vehicles with unusually low mileage</li>
<li>Newer vehicles subjected to high annual mileage</li>
</ul>
</li>
<li>The final synthetic dataset contained approximately <strong>114,000 samples</strong> and was exported for training.</li>
</ul>
<p>Synthetic data allowed full control over the training set characteristics while avoiding licensing or usage constraints from proprietary datasets.</p>
<h3 id="additional-considerations">Additional Considerations</h3>
<p>Additional considerations were applied to enhance data realism:</p>
<ul>
<li>Vehicle mileage impact on value was modeled non-linearly to reflect diminishing returns after certain thresholds (e.g., past 400,000 miles).</li>
<li>Year-based value multipliers were designed as a gradually increasing function to simulate realistic vehicle depreciation over time, with older vehicles weighted progressively lower and newest models retaining full base value.</li>
<li>Vehicle condition probabilities were tied to vehicle age, simulating realistic depreciation patterns where newer vehicles are more likely to be in &quot;Like New&quot; or &quot;Excellent&quot; condition, while older vehicles progressively tend toward &quot;Good&quot;, &quot;Fair&quot;, or &quot;Poor&quot; ratings.</li>
<li>Resale value calculations were driven by a multiplicative model incorporating brand prestige, model popularity, vehicle age, condition rating, and mileage impact, with special handling for vehicles under 25,000 miles to preserve near-new valuation.</li>
<li>Stratified sampling was used to introduce edge case populations, such as:
<ul>
<li>Older vehicles preserved with unusually low mileage</li>
<li>Newer vehicles subjected to high annual mileage</li>
</ul>
</li>
<li>Weights were carefully tuned to reflect typical brand and model reputation effects on resale value.</li>
<li>Synthetic data distributions were designed to balance realism with sufficient variability for robust model generalization.</li>
</ul>
<h3 id="resale-value-formula">Resale Value Formula</h3>
<p>Resale value was calculated based on the following multiplicative model:
<code>Value = Base_Value × (Maker_Weight × Model_Weight × Year_Weight × Condition_Weight × Mileage_Weight) + Offset</code></p>
<p>Mileage impact was modeled as:
<code>Mileage_Weight = max(0.01, min(1, 1 - (Miles / 400,000)))</code></p>
<p>For vehicles with mileage ≤ 25,000 miles, the mileage adjustment is skipped to reflect near-new conditions.</p>
<p>This structure ensured realistic and bounded value distributions across different vehicle ages, brands, conditions, and usage profiles.</p>
<p>The full data generation process is documented in <a href="notebooks/data_generation_car_value_estimator.ipynb"><code>/notebooks/data_generation_car_value_estimator.ipynb</code></a>.</p>
<p>The synthetic dataset (<code>car_value_training_data_v2.csv</code>) is available in the <a href="data/"><code>/data/</code></a> folder.</p>
<hr>
<h2 id="technology-stack">Technology Stack</h2>
<table>
<thead>
<tr>
<th style="text-align:left">Component</th>
<th style="text-align:left">Technology</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">UI Framework</td>
<td style="text-align:left"><a href="https://kivy.org/">Kivy</a></td>
</tr>
<tr>
<td style="text-align:left">Model Inference</td>
<td style="text-align:left"><a href="https://onnxruntime.ai/">ONNX Runtime</a></td>
</tr>
<tr>
<td style="text-align:left">Backend Language</td>
<td style="text-align:left">Python 3.10+</td>
</tr>
<tr>
<td style="text-align:left">Model Training</td>
<td style="text-align:left">XGBoost (trained externally, exported to ONNX)</td>
</tr>
<tr>
<td style="text-align:left">App Packaging</td>
<td style="text-align:left">PyInstaller (for macOS <code>.app</code> bundling)</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="installation">Installation</h2>
<h3 id="requirements">Requirements</h3>
<ul>
<li>Python 3.10+</li>
<li>pip (Python package installer)</li>
</ul>
<h3 id="setup">Setup</h3>
<pre><code class="language-bash"><span class="hljs-comment"># Clone the repository</span>
git <span class="hljs-built_in">clone</span> https://github.com/ProjectsPortal/car-value-estimator.git
<span class="hljs-built_in">cd</span> car-value-estimator

<span class="hljs-comment"># Install dependencies</span>
pip install -r requirements.txt

<span class="hljs-comment"># Run the application</span>
python main.py
</code></pre>
<h3 id="packaging-for-macos">Packaging for macOS</h3>
<p>The application was successfully packaged into a standalone macOS .app using PyInstaller.
The packaged application is not included directly in this repository due to file size constraints.</p>
<p>Notes:</p>
<ul>
<li>A zipped .app file is available separately via GitHub Releases</li>
<li>As the application is unsigned, macOS may require manual approval during first launch.</li>
<li>The app has only been tested on macOS Sonoma 14.2</li>
</ul>
<hr>
<h2 id="project-structure">Project Structure</h2>
<pre><code>car-value-estimator/
├── main.py                # Application logic (UI interaction, model inference)
├── kvcarvalueapp.kv        # Kivy layout file
├── car_value_xgb_regressor.onnx  # Pre-trained model in ONNX format
├── car_icon.icns           # Custom application icon
├── requirements.txt        # Python dependencies
├── LICENSE                 # MIT License
├── README.md               # Project description
└── .gitignore              # Git ignore rules
</code></pre>
<hr>
<h2 id="license">License</h2>
<p>This project is licensed under the MIT License.</p>
<hr>
<h2 id="acknowledgements">Acknowledgements</h2>
<p><a href="https://kivy.org/">https://kivy.org/</a>
<a href="https://onnxruntime.ai/">https://onnxruntime.ai/</a></p>

            <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
            
        </body>
        </html>